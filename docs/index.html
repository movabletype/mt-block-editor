<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <script
      src="https://cdn.tiny.cloud/1/no-api-key/tinymce/4/tinymce.min.js"
      referrerpolicy="origin"
    ></script>
  </head>
  <body>
    <div>
      <br />
      <br />
      <br />
      <br />
      <form>
        <textarea id="body">
        &lt;!-- mtEditorBlock data-mt-block-type=&quot;textblock&quot;  --&gt;
&lt;p&gt;axxwwww&lt;/p&gt;
&lt;!-- /mtEditorBlock --&gt;&lt;!-- mtEditorBlock data-mt-block-type=&quot;mtnet-image&quot; data-mt-block-meta=&quot;{&amp;quot;assetId&amp;quot;:10387}&quot; --&gt;&lt;figure style=&quot;display:inline-block&quot;&gt;&lt;img src=&quot;https://tamano-20190823.movabletype.io.vagrant.local/.assets/thumbnail/IMG_5551-640wri.jpg&quot; alt=&quot;abc&quot; width=&quot;640&quot; height=&quot;853&quot;/&gt;&lt;figcaption&gt;def&lt;/figcaption&gt;&lt;/figure&gt;&lt;!-- /mtEditorBlock --&gt;
      </textarea
        >
        <input type="submit" id="submit" />
        <input type="submit" id="unload" value="Unload" />
      </form>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <script>
        document.getElementById("body").value = `

<!-- mtEditorBlock data-mt-block-type="textblock"--><p>axxwwww</p><!-- /mtEditorBlock --><!-- mtEditorBlock data-mt-block-type="test-block" data-mt-block-html="&lt;!-- mtEditorBlock data-mt-block-type=&quot;textblock&quot;--&gt;&lt;p&gt;https://twitter.com/tonycassara2/status/1201381978806734848&lt;/p&gt;&lt;!-- /mtEditorBlock --&gt;"--><blockquote class="twitter-tweet"><p lang="en" dir="ltr">Can you help configure HTTPS on my CloudFront? ðŸ˜¤</p>&mdash; Tony Cassara (@tonycassara2) <a href="https://twitter.com/tonycassara2/status/1201381978806734848?ref_src=twsrc%5Etfw">December 2, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></scr` + `ipt>
<!-- /mtEditorBlock -->

        `;
      </script>
    </div>
    <script src="./dist/mt-block-editor.js"></script>
    <script>
      MTBlockEditor.registerBlock(
        MTBlockEditor.createBoilerplateBlock({
          id: "test-block",
          label: "ãƒ†ã‚¹ãƒˆ",
          html:
            `<!-- mtEditorBlock data-mt-block-type="textblock"--><p>http://</p><!-- /mtEditorBlock -->`,
          canRemoveBlock: false,
          addableBlockTypes: [],
          previewHeader:
            `
<script>
document.addEventListener('DOMContentLoaded', async function() {
  const url = document.querySelector("p").textContent;
  const res = await fetch("https://noembed.com/embed?url=" + url);
  const data = await res.json();

  parent.postMessage( { method: "MTBlockEditorSetCompiledHtml", blockId: document.body.dataset.blockId, html: data.html, }, "*")
});
</sc` +
            `ript>
          `,
        })
      );
      MTBlockEditor.apply({
        id: "body",
        stylesheets: [
          //'https://taaas.jp/mt-static/support/theme_static/rainier/css/base.css',
        ],
      });

      document
        .getElementById("submit")
        .form.addEventListener("submit", function(ev) {
          ev.preventDefault();
          document
            .getElementById("submit")
            .form.dispatchEvent(new Event("MTBlockEditorSerialize"));
        });

      document.getElementById("unload").addEventListener("click", function(ev) {
        ev.preventDefault();
        MTBlockEditor.unload({ id: "body" });
      });
    </script>
  </body>
</html>
